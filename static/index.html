<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Predict Aggregator</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: system-ui, -apple-system, sans-serif; background: #f5f5f5; color: #1a1a1a; }

    .header {
      background: #fff; border-bottom: 1px solid #e5e5e5;
      padding: 16px 32px; display: flex; align-items: center; justify-content: space-between;
    }
    .logo { font-size: 20px; font-weight: 700; }
    .logo span { color: #6366f1; }

    .container { max-width: 1100px; margin: 32px auto; padding: 0 16px; }

    .grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
    }
    @media (max-width: 900px) { .grid { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 520px) { .grid { grid-template-columns: 1fr; } }

    .card {
      background: #fff; border-radius: 12px; padding: 20px;
      border: 1px solid #e5e5e5; display: flex; flex-direction: column;
      transition: box-shadow .15s;
    }
    .card:hover { box-shadow: 0 4px 16px rgba(0,0,0,.08); }

    .card-top { display: flex; align-items: flex-start; gap: 12px; margin-bottom: 16px; min-height: 56px; }
    .card-icon {
      width: 40px; height: 40px; border-radius: 50%; background: #eee;
      display: flex; align-items: center; justify-content: center; font-size: 20px;
      flex-shrink: 0; overflow: hidden;
    }
    .card-icon img { width: 100%; height: 100%; object-fit: cover; }
    .card-title { font-size: 15px; font-weight: 600; line-height: 1.3; }

    .outcomes { flex: 1; display: flex; flex-direction: column; gap: 8px; margin-bottom: 16px; }

    .outcome-row {
      display: flex; align-items: center; justify-content: space-between; gap: 8px;
    }
    .outcome-name { font-size: 14px; color: #444; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100px; }
    .outcome-pct { font-size: 14px; font-weight: 700; min-width: 36px; }
    .outcome-btns { display: flex; gap: 4px; }
    .btn-yes, .btn-no {
      padding: 4px 12px; border-radius: 6px; font-size: 12px; font-weight: 600;
      border: none; cursor: pointer;
    }
    .btn-yes { background: #dcfce7; color: #16a34a; }
    .btn-yes:hover { background: #bbf7d0; }
    .btn-no { background: #fee2e2; color: #dc2626; }
    .btn-no:hover { background: #fecaca; }

    .card-footer {
      margin-top: auto; padding-top: 12px; border-top: 1px solid #f0f0f0;
      display: flex; align-items: center; justify-content: space-between;
    }
    .card-stats { font-size: 12px; color: #888; }
    .platform-icons { display: flex; gap: 4px; }
    .platform-icon {
      width: 20px; height: 20px; border-radius: 50%; background: #eee;
      display: flex; align-items: center; justify-content: center;
      font-size: 10px; font-weight: 700; color: #666;
      overflow: hidden;
    }
    .platform-icon img { width: 100%; height: 100%; object-fit: cover; }
  </style>
</head>
<body>

<div class="header">
  <div class="logo"><span>Predict</span> Aggregator</div>
</div>

<div class="container">
  <div class="grid" id="grid"></div>
</div>

<script>
const PLATFORMS = {
  polymarket:  { name: 'Polymarket',  color: '#4f46e5', letter: 'P' },
  azuro:       { name: 'Azuro',       color: '#06b6d4', letter: 'A' },
  gnosis:      { name: 'Gnosis',      color: '#3e6957', letter: 'G' },
  overtime:    { name: 'Overtime',     color: '#f59e0b', letter: 'O' },
  sx:          { name: 'SX Bet',      color: '#ec4899', letter: 'S' },
};

async function render() {
  const resp = await fetch('/static/events.json');
  const EVENTS = await resp.json();
  const grid = document.getElementById('grid');
  grid.innerHTML = EVENTS.map(ev => `
    <div class="card">
      <div class="card-top">
        <div class="card-icon">${ev.icon}</div>
        <div class="card-title">${ev.title}</div>
      </div>
      <div class="outcomes">
        ${ev.outcomes.map(o => `
          <div class="outcome-row">
            <span class="outcome-name">${o.name}</span>
            <span class="outcome-pct">${o.pct}%</span>
            <div class="outcome-btns">
              <button class="btn-yes">Yes</button>
              <button class="btn-no">No</button>
            </div>
          </div>
        `).join('')}
      </div>
      <div class="card-footer">
        <span class="card-stats">${ev.volume} &bull; ${ev.txs}</span>
        <div class="platform-icons">
          ${ev.platforms.map(p => {
            const pl = PLATFORMS[p];
            return `<div class="platform-icon" title="${pl.name}" style="background:${pl.color};color:#fff;">${pl.letter}</div>`;
          }).join('')}
        </div>
      </div>
    </div>
  `).join('');
}

render();
</script>
</body>
</html>
